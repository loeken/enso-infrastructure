# network interface settings; autogenerated
# Please do NOT modify this file directly, unless you know what
# you're doing.

source /etc/network/interfaces.d/*

auto lo
iface lo inet loopback

{% for iface in existing_vmbr_interfaces %}
# Skip existing vmbr interface: {{ iface }}
{% endfor %}

{% for iface in physical_interfaces %}
{% set bridge_name = 'vmbr' ~ loop.index0 %}
# {% if loop.index == 1 %}WAN{% else %}LAN{% endif %} interface
auto {{ iface }}
iface {{ iface }} inet manual

{% if loop.index == 1 %}
# Bridge for the primary interface
auto {{ bridge_name }}
iface {{ bridge_name }} inet static
    address 192.168.178.105
    netmask 255.255.255.0
    gateway 192.168.178.1
{% else %}
# Bridge for the secondary interface
auto {{ bridge_name }}
iface {{ bridge_name }} inet manual
{% endif %}
    bridge-ports {{ iface }}
    bridge-stp off
    bridge-fd 0
    bridge-vlan-aware yes
    bridge-vids 2-4094
{% endfor %}
